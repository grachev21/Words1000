{% load static %}
<!-- Mobile menu slider component -->
<div class="slider">
  <div class="title-block">
    {% include 'includes/logo.html' %}
    <div class="block-close">
      <img class="icon-close" src="{% static 'icons/close.png' %}" alt="" />
    </div>
  </div>

  <!-- Main navigation menu items -->
  {% for m in menu %}
  <!-- checks whether the URL is equal to this link and makes the link of this page active -->
  {% if request.resolver_match.url_name == m.url_name %}
  <!-- Active menu item -->
  <a class="active-link-mobile" href="{% url m.url_name %}">
    <img class="icons" src="{% static m.img_path %}" alt="{{ m.name }}" />
    <p>{{ m.name }}</p>
  </a>
  {% else %}
  <!-- Regular menu item -->
  <a class="link-mobile" href="{% url m.url_name %}">
    <img class="icons" src="{% static m.img_path %}" alt="{{ m.name }}" />
    <p>{{ m.name }}</p>
  </a>
  {% endif %} {% endfor %}

  <!-- User authentication menu -->
  {% if request.user.is_authenticated %}
  <!-- Logged in user menu -->
  <a class="link-mobile" href="{% url user_menu.0.url_name %}">
    <img class="icons" src="{% static m.img_path %}" alt="{{ user_menu.0.name }}" />
    <p>{{ user_menu.0.name }}</p>
  </a>
  {% else %}
  <!-- Authentication links for guests -->
  <a class="link-mobile" href="{% url user_menu.1.url_name %}"> {{ user_menu.1.name }} </a>
  <a class="link-mobile" href="{% url user_menu.2.url_name %}"> {{ user_menu.2.name }} </a>
  {% endif %}
</div>

<!-- Mobile menu toggle functionality -->
<script>
  // Constants and DOM elements
  const MENU_HIDDEN_POSITION = "-420px";
  const MENU_VISIBLE_POSITION = "0px";

  const mobileMenu = document.querySelector(".slider");
  const menuToggle = document.querySelector(".icons-menu");
  const closeMenu = document.querySelector(".icon-close");

  // Toggle menu visibility function
  function toggleMobileMenu() {
    const isMenuVisible = mobileMenu.style.left === MENU_VISIBLE_POSITION;
    mobileMenu.style.left = isMenuVisible ? MENU_HIDDEN_POSITION : MENU_VISIBLE_POSITION;
  }

  // Event listener for menu toggle
  menuToggle.addEventListener("click", toggleMobileMenu);
  closeMenu.addEventListener("click", toggleMobileMenu)
</script>
