{% extends "base.html" %}
{% load TagWords %}
{% load static %}


{% block content %}

<div class="text-6xl font-bold text-col_con mb-8 ">Все слова</div>

{% include 'includes/running_line.html' %}

<div class="text-6xl font-bold text-col_con mb-8 mt-28">Ваши настройки</div>

<!-- Card -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4">
    {% for sd in services_data %}
        {% card sd.name sd.description sd.data %}
    {% endfor %}
</div>

<div class="text-6xl font-bold text-col_con mb-8 mt-28">Ваши графики</div>
{% if request.user.is_authenticated %}

{{ chart_date|json_script:"chart-data" }}

<!--Charts-->
<div x-data="{tab: 'week'}" class="min-h-[500px] max-h-[500px]">
    <div class="flex gap-3 mb-4">
        <button
            @click="tab = 'week'"
            :class="tab === 'week' ? 'bg-col_attn text-white' : 'bg-col_nit text-col_con'"
            class="font-bold py-2 px-4 cursor-pointer rounded transition-colors">
            За неделю
        </button>
        <button
            @click="tab = 'month'"
            :class="tab === 'month' ? 'bg-col_attn text-white' : 'bg-col_nit text-col_con'"
            class="font-bold py-2 px-4 cursor-pointer rounded transition-colors">
            За месяц
        </button>
        <button
            @click="tab = 'season'"
            :class="tab === 'season' ? 'bg-col_attn text-white' : 'bg-col_nit text-col_con'"
            class="font-bold py-2 px-4 cursor-pointer rounded transition-colors">
            За сезон
        </button>
        <button
            @click="tab = 'year'"
            :class="tab === 'year' ? 'bg-col_attn text-white' : 'bg-col_nit text-col_con'"
            class="font-bold py-2 px-4 cursor-pointer rounded transition-colors">
            За год
        </button>
    </div>

    <div x-show="tab === 'week'" x-transition class="bg-col_nit_con p-6 rounded-lg shadow max-h-[440px] relative">
        <canvas id="myChartWeek" class="w-full h-[440px]"></canvas>
    </div>
    <div x-show="tab === 'month'" x-transition class="bg-col_nit_con p-6 rounded-lg shadow max-h-[440px] relative">
        <canvas id="myChartMonth" class="w-full h-[440px]"></canvas>
    </div>
    <div x-show="tab === 'season'" x-transition class="bg-col_nit_con p-6 rounded-lg shadow max-h-[440px] relative">
        <canvas id="myChartSeason" class="w-full h-[440px]"></canvas>
    </div>
    <div x-show="tab === 'year'" x-transition class="bg-col_nit_con p-6 rounded-lg shadow max-h-[440px] relative">
        <canvas id="myChartYear" class="w-full h-[440px]"></canvas>
    </div>
</div>
<!--End Charts-->

{% endif %}

{% include 'includes/home/about.html' %}

{% endblock content %}
